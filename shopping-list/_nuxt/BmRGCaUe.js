import{_ as I}from"./BhwAQcHD.js";import{f as z,E as P,p as T,q as j,r as E,V as w,c as h,g as U,h as q,i as G,o as r,a as u,b as y,t as o,e as l,x as s,s as d,W as A,n as $,G as F,A as O,k as c,F as b,I as W,l as x,m as D,_ as H}from"./Cuf4x8j3.js";import{_ as J}from"./DNCjkwDw.js";import{u as K}from"./C5SoG7Us.js";const Q={class:"LoginPage"},R=z({__name:"login",setup(se){const V=K(),k=P(),m=T();j({title:()=>m.t("pages.login.title")});const n=E(!1),a=w({email:"",password:""}),t=w({status:"",details:""}),v=h(()=>m.t(`pages.login.info.${t.status}`));async function L(){if(n.value)return!1;t.details="",t.status="";try{n.value=!0;const{error:e}=await V.auth.signInWithPassword(a);e?(t.details=e.message,t.status="error"):t.status="success"}catch(e){t.status="undefinedError",console.error("LOGIN_PAGE:ON_SUBMIT:",e)}finally{n.value=!1}}const B=h(()=>[[k[`--${t.status}-status`]]]),C=U(),M=q();return G(C,async e=>{e&&(await x(),await D(M("/"),{replace:!0}))},{immediate:!0}),(e,i)=>{var f,_;const g=I,N=O,S=J;return r(),u("div",Q,[y("form",{class:$(e.$style.wrapper),onSubmit:F(L,["prevent"])},[y("h2",null,o(e.$t("pages.login.subtitle")),1),l(g,{id:"login-email",modelValue:s(a).email,"onUpdate:modelValue":i[0]||(i[0]=p=>s(a).email=p),maxlength:"255",autocomplete:"email",required:"",type:"email",placeholder:e.$t("pages.login.email.placeholder"),title:e.$t("pages.login.email.title")},null,8,["modelValue","placeholder","title"]),l(g,{id:"login-password",modelValue:s(a).password,"onUpdate:modelValue":i[1]||(i[1]=p=>s(a).password=p),maxlength:"255",autocomplete:"password",required:"",type:"password",placeholder:e.$t("pages.login.password.placeholder"),title:e.$t("pages.login.password.title")},null,8,["modelValue","placeholder","title"]),l(N,{to:"/register"},{default:d(()=>[c(o(e.$t("pages.login.registerLink")),1)]),_:1}),l(S,{disabled:!((f=s(a).email)!=null&&f.length)&&!((_=s(a).password)!=null&&_.length)},{default:d(()=>[s(n)?(r(),u(b,{key:0},[c(o(e.$t("pages.login.button.loading")),1)],64)):(r(),u(b,{key:1},[c(o(e.$t("pages.login.button.submit")),1)],64))]),_:1},8,["disabled"]),l(A,{name:"bottom",mode:"out-in"},{default:d(()=>[s(t).status?(r(),u("div",{key:0,class:$([e.$style.info,s(B)])},o(s(v))+" "+o(s(t).details),3)):W("",!0)]),_:1})],34)])}}}),X="_wrapper_jz0t5_7",Y="_info_jz0t5_15",Z={wrapper:X,info:Y,"--success-status":"_--success-status_jz0t5_18","--error-status":"_--error-status_jz0t5_21"},ee={$style:Z},ne=H(R,[["__cssModules",ee]]);export{ne as default};
